{"ast":null,"code":"import cors from \"../../cors\";\nimport { FactoryLogic } from \"radiotrasmitter/RadioTransmitter/dist/logic/FactoryLogic\";\nimport { OwnCampaign } from \"radiotrasmitter/RadioTransmitter/dist/shared/entityshared/OwnCampaign\";\nimport { Emission } from \"radiotrasmitter/RadioTransmitter/dist/shared/entityshared/Emission\";\nexport default async function (req, res) {\n  if (req.method === \"POST\") {\n    try {\n      const data = req.body;\n      await cors(req, res);\n      const getprogr = await FactoryLogic.getLogicProgram().getProgram(data.program);\n      const getcampaign = await FactoryLogic.getLogicCampaign().getCampaign(data.title);\n      const emission = new Emission(getprogr, data.date);\n      getcampaign.listemision.push(emission);\n      await FactoryLogic.getLogicCampaign().addCEmission(getcampaign);\n      return res.status(200).json({\n        status: \"Success\"\n      });\n    } catch (error) {\n      return res.status(500).json({\n        status: \"Error\",\n        data: {\n          msg: \"Could not add emission\",\n          error: error.toString()\n        }\n      });\n    }\n  }\n}","map":{"version":3,"sources":["C:/Users/Waldemar/Desktop/APINextRadiotrasmitter/pages/api/campaign/emission/owncemission.js"],"names":["cors","FactoryLogic","OwnCampaign","Emission","req","res","method","data","body","getprogr","getLogicProgram","getProgram","program","getcampaign","getLogicCampaign","getCampaign","title","emission","date","listemision","push","addCEmission","status","json","error","msg","toString"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,YAAjB;AACA,SAAQC,YAAR,QAA2B,0DAA3B;AACA,SAAQC,WAAR,QAA0B,uEAA1B;AACA,SAAQC,QAAR,QAAuB,oEAAvB;AAGA,eAAe,gBAAgBC,GAAhB,EAAqBC,GAArB,EAA0B;AAEvC,MAAGD,GAAG,CAACE,MAAJ,KAAa,MAAhB,EACA;AACE,QACA;AACA,YAAMC,IAAI,GAAGH,GAAG,CAACI,IAAjB;AACA,YAAMR,IAAI,CAACI,GAAD,EAAMC,GAAN,CAAV;AACA,YAAMI,QAAQ,GAAC,MAAMR,YAAY,CAACS,eAAb,GAA+BC,UAA/B,CAA0CJ,IAAI,CAACK,OAA/C,CAArB;AACA,YAAMC,WAAW,GAAC,MAAMZ,YAAY,CAACa,gBAAb,GAAgCC,WAAhC,CAA4CR,IAAI,CAACS,KAAjD,CAAxB;AACA,YAAMC,QAAQ,GAAC,IAAId,QAAJ,CAAaM,QAAb,EAAsBF,IAAI,CAACW,IAA3B,CAAf;AACAL,MAAAA,WAAW,CAACM,WAAZ,CAAwBC,IAAxB,CAA6BH,QAA7B;AACD,YAAMhB,YAAY,CAACa,gBAAb,GAAgCO,YAAhC,CAA6CR,WAA7C,CAAN;AACC,aAAOR,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAED,QAAAA,MAAM,EAAE;AAAV,OAArB,CAAP;AACC,KAVD,CAWA,OAAOE,KAAP,EAAc;AACZ,aAAOnB,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,QAAAA,MAAM,EAAE,OADkB;AAE1Bf,QAAAA,IAAI,EAAE;AAAEkB,UAAAA,GAAG,EAAE,wBAAP;AAAiCD,UAAAA,KAAK,EAAEA,KAAK,CAACE,QAAN;AAAxC;AAFoB,OAArB,CAAP;AAID;AACF;AACF","sourcesContent":["import cors from \"../../cors\";\r\nimport {FactoryLogic} from \"radiotrasmitter/RadioTransmitter/dist/logic/FactoryLogic\";\r\nimport {OwnCampaign} from \"radiotrasmitter/RadioTransmitter/dist/shared/entityshared/OwnCampaign\";\r\nimport {Emission} from \"radiotrasmitter/RadioTransmitter/dist/shared/entityshared/Emission\";\r\n\r\n\r\nexport default async function (req, res) {\r\n\r\n  if(req.method===\"POST\")\r\n  {\r\n    try\r\n    {\r\n    const data = req.body;\r\n    await cors(req, res)\r\n    const getprogr=await FactoryLogic.getLogicProgram().getProgram(data.program);\r\n    const getcampaign=await FactoryLogic.getLogicCampaign().getCampaign(data.title);\r\n    const emission=new Emission(getprogr,data.date);\r\n    getcampaign.listemision.push(emission);\r\n   await FactoryLogic.getLogicCampaign().addCEmission(getcampaign);\r\n    return res.status(200).json({ status: \"Success\" });\r\n    }\r\n    catch (error) {\r\n      return res.status(500).json({\r\n        status: \"Error\",\r\n        data: { msg: \"Could not add emission\", error: error.toString() }\r\n      });\r\n    }\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}