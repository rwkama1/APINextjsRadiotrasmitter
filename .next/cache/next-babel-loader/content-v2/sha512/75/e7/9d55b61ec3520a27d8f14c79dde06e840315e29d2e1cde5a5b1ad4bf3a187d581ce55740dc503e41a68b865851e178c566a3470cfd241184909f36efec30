{"ast":null,"code":"import cors from \"../cors\";\nimport { FactoryLogic } from \"radiotrasmitter/RadioTransmitter/dist/logic/FactoryLogic\";\nimport { ECampaign } from \"radiotrasmitter/RadioTransmitter/dist/shared/entityshared/ECampaign\";\nexport default async function (req, res) {\n  // if(req.method===\"GET\")\n  // {\n  //   const { ptitle } = req.query;\n  //   await cors(req, res)\n  //   const camp=await FactoryLogic.getLogicCampaign().getCampaign(ptitle);\n  //   res.send(camp);\n  // }\n  if (req.method === \"POST\") {\n    await cors(req, res);\n\n    try {\n      const data = req.body;\n      const getad = await FactoryLogic.getLogicAdvertiser().getAdvertiser(data.rut);\n      const dtcamp = new ECampaign(data.title, data.datei, data.datef, data.duration, data.mentions, getad, data.producer, []);\n      await FactoryLogic.getLogicCampaign().addCampaign(dtcamp);\n      return res.status(200).json({\n        status: \"Success\"\n      });\n    } catch (error) {\n      return res.status(500).json({\n        status: \"Error\",\n        data: {\n          msg: \"Could not add campaign\",\n          error: error.toString()\n        }\n      });\n    }\n  }\n\n  if (req.method === \"PUT\") {\n    await cors(req, res);\n\n    try {\n      const data = req.body;\n      const getad = await FactoryLogic.getLogicAdvertiser().getAdvertiser(data.rut);\n      const dtcamp = new ECampaign(data.title, data.datei, data.datef, data.duration, data.mentions, getad, data.producer, []);\n      await FactoryLogic.getLogicCampaign().updateCampaign(dtcamp);\n      return res.status(200).json({\n        status: \"Success\"\n      });\n    } catch (error) {\n      return res.status(500).json({\n        status: \"Error\",\n        data: {\n          msg: \"Could not update campaign\",\n          error: error.toString()\n        }\n      });\n    }\n  }\n\n  if (req.method === \"DELETE\") {\n    await cors(req, res);\n    const data = req.body;\n\n    try {\n      const dtcamp = new ECampaign(data.title, \"\", \"\", 0, 0, null, \"\", []);\n      const delcam = await FactoryLogic.getLogicCampaign().deleteCampaign(dtcamp);\n      await FactoryLogic.getLogicCampaign().updateCampaign(delcam);\n      return res.status(200).json({\n        status: \"Success\"\n      });\n    } catch (error) {\n      return res.status(500).json({\n        status: \"Error\",\n        data: {\n          error: error.toString()\n        }\n      });\n    }\n  }\n}","map":{"version":3,"sources":["C:/Users/Waldemar/Desktop/APINextRadiotrasmitter/pages/api/campaign/ecampaign.js"],"names":["cors","FactoryLogic","ECampaign","req","res","method","data","body","getad","getLogicAdvertiser","getAdvertiser","rut","dtcamp","title","datei","datef","duration","mentions","producer","getLogicCampaign","addCampaign","status","json","error","msg","toString","updateCampaign","delcam","deleteCampaign"],"mappings":"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","sourcesContent":["import cors from \"../cors\";\r\nimport {FactoryLogic} from \"radiotrasmitter/RadioTransmitter/dist/logic/FactoryLogic\";\r\nimport {ECampaign} from \"radiotrasmitter/RadioTransmitter/dist/shared/entityshared/ECampaign\";\r\n\r\nexport default async function (req, res) {\r\n\r\n  // if(req.method===\"GET\")\r\n  // {\r\n  //   const { ptitle } = req.query;\r\n  //   await cors(req, res)\r\n  //   const camp=await FactoryLogic.getLogicCampaign().getCampaign(ptitle);\r\n  //   res.send(camp);\r\n  // }\r\n\r\n\r\n  if(req.method===\"POST\")\r\n  {\r\n    await cors(req, res)\r\n    try\r\n    {\r\n    const data = req.body;\r\n    const getad=await FactoryLogic.getLogicAdvertiser().getAdvertiser(data.rut);\r\n    const dtcamp=new ECampaign(data.title,data.datei,data.datef,data.duration,data.mentions,getad,data.producer,[]);\r\n   await FactoryLogic.getLogicCampaign().addCampaign(dtcamp);\r\n    return res.status(200).json({ status: \"Success\" });\r\n    }\r\n    catch (error) {\r\n      return res.status(500).json({\r\n        status: \"Error\",\r\n        data: { msg: \"Could not add campaign\", error: error.toString() }\r\n      });\r\n    }\r\n  }\r\n  if(req.method===\"PUT\")\r\n  {\r\n    await cors(req, res)\r\n    try\r\n    {\r\n    const data = req.body;\r\n    const getad=await FactoryLogic.getLogicAdvertiser().getAdvertiser(data.rut);\r\n    const dtcamp=new ECampaign(data.title,data.datei,data.datef,data.duration,data.mentions,getad,data.producer,[]);\r\n    await FactoryLogic.getLogicCampaign().updateCampaign(dtcamp);\r\n    return res.status(200).json({ status: \"Success\" });\r\n    }\r\n    catch (error) {\r\n      return res.status(500).json({\r\n        status: \"Error\",\r\n        data: { msg: \"Could not update campaign\", error:error.toString() }\r\n      });\r\n    }\r\n  }\r\n  if(req.method===\"DELETE\")\r\n  {\r\n    await cors(req, res);\r\n    const data = req.body;\r\n    try\r\n    {\r\n  \r\n      const dtcamp=new ECampaign(data.title,\"\",\"\",0,0,null,\"\",[]);\r\n    const delcam=await FactoryLogic.getLogicCampaign().deleteCampaign(dtcamp);\r\n    await FactoryLogic.getLogicCampaign().updateCampaign(delcam);\r\n    return res.status(200).json({ status: \"Success\" });\r\n    }\r\n    catch (error) {\r\n      return res.status(500).json({\r\n        status: \"Error\",\r\n        data: {  error: error.toString() }\r\n      });\r\n    }\r\n  }\r\n  }\r\n\r\n "]},"metadata":{},"sourceType":"module"}