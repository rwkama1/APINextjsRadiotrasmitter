{"ast":null,"code":"import cors from \"../cors\";\nimport { FactoryLogic } from \"radiotrasmitter/RadioTransmitter/dist/logic/FactoryLogic\";\nimport { OwnCampaign } from \"radiotrasmitter/RadioTransmitter/dist/shared/entityshared/OwnCampaign\";\nexport default async function (req, res) {\n  if (req.method === \"GET\") {\n    const {\n      ptitle\n    } = req.query;\n    await cors(req, res);\n    const camp = await FactoryLogic.getLogicCampaign().getCampaign(ptitle);\n    res.send(camp);\n  }\n\n  if (req.method === \"POST\") {\n    await cors(req, res);\n\n    try {\n      const data = req.body;\n      const getad = await FactoryLogic.getLogicAdvertiser().getAdvertiser(data.rut);\n      const dtcamp = new OwnCampaign(data.title, data.datei, data.datef, data.duration, data.mentions, getad, data.cost, []);\n      await FactoryLogic.getLogicCampaign().addCampaign(dtcamp);\n      return res.status(200).json({\n        status: \"Success\"\n      });\n    } catch (error) {\n      return res.status(500).json({\n        status: \"Error\",\n        data: {\n          msg: \"Could not add campaign\",\n          error: error.toString()\n        }\n      });\n    }\n  }\n\n  if (req.method === \"PUT\") {\n    await cors(req, res);\n\n    try {\n      const data = req.body;\n      const getad = await FactoryLogic.getLogicAdvertiser().getAdvertiser(data.rut);\n      const dtcamp = new OwnCampaign(data.title, data.datei, data.datef, data.duration, data.mentions, getad, data.cost, []);\n      await FactoryLogic.getLogicCampaign().updateCampaign(dtcamp);\n      return res.status(200).json({\n        status: \"Success\"\n      });\n    } catch (error) {\n      return res.status(500).json({\n        status: \"Error\",\n        data: {\n          msg: \"Could not update campaign\",\n          error: error.toString()\n        }\n      });\n    }\n  }\n\n  if (req.method === \"DELETE\") {\n    await cors(req, res);\n    const data = req.body;\n\n    try {\n      const dtcamp = new OwnCampaign(data.title, \"\", \"\", 0, 0, null, 0, []);\n      await FactoryLogic.getLogicCampaign().deleteCampaign(dtcamp);\n      return res.status(200).json({\n        status: \"Success\"\n      });\n    } catch (error) {\n      return res.status(500).json({\n        status: \"Error\",\n        data: {\n          error: error.toString()\n        }\n      });\n    }\n  }\n}","map":{"version":3,"sources":["C:/Users/Waldemar/Desktop/APINextRadiotrasmitter/pages/api/campaign/owncampaign.js"],"names":["cors","FactoryLogic","OwnCampaign","req","res","method","ptitle","query","camp","getLogicCampaign","getCampaign","send","data","body","getad","getLogicAdvertiser","getAdvertiser","rut","dtcamp","title","datei","datef","duration","mentions","cost","addCampaign","status","json","error","msg","toString","updateCampaign","deleteCampaign"],"mappings":"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","sourcesContent":["import cors from \"../cors\";\r\nimport {FactoryLogic} from \"radiotrasmitter/RadioTransmitter/dist/logic/FactoryLogic\";\r\nimport {OwnCampaign} from \"radiotrasmitter/RadioTransmitter/dist/shared/entityshared/OwnCampaign\";\r\n\r\nexport default async function (req, res) {\r\n\r\n  if(req.method===\"GET\")\r\n  {\r\n    const { ptitle } = req.query;\r\n    await cors(req, res)\r\n    const camp=await FactoryLogic.getLogicCampaign().getCampaign(ptitle);\r\n    res.send(camp);\r\n  }\r\n\r\n\r\n  if(req.method===\"POST\")\r\n  {\r\n    await cors(req, res)\r\n    try\r\n    {\r\n    const data = req.body;\r\n    const getad=await FactoryLogic.getLogicAdvertiser().getAdvertiser(data.rut);\r\n    const dtcamp=new OwnCampaign(data.title,data.datei,data.datef,data.duration,data.mentions,getad,data.cost,[]);\r\n   await FactoryLogic.getLogicCampaign().addCampaign(dtcamp);\r\n    return res.status(200).json({ status: \"Success\" });\r\n    }\r\n    catch (error) {\r\n      return res.status(500).json({\r\n        status: \"Error\",\r\n        data: { msg: \"Could not add campaign\", error: error.toString() }\r\n      });\r\n    }\r\n  }\r\n  if(req.method===\"PUT\")\r\n  {\r\n    await cors(req, res)\r\n    try\r\n    {\r\n    const data = req.body;\r\n    const getad=await FactoryLogic.getLogicAdvertiser().getAdvertiser(data.rut);\r\n    const dtcamp=new OwnCampaign(data.title,data.datei,data.datef,data.duration,data.mentions,getad,data.cost,[]);\r\n    await FactoryLogic.getLogicCampaign().updateCampaign(dtcamp);\r\n    return res.status(200).json({ status: \"Success\" });\r\n    }\r\n    catch (error) {\r\n      return res.status(500).json({\r\n        status: \"Error\",\r\n        data: { msg: \"Could not update campaign\", error:error.toString() }\r\n      });\r\n    }\r\n  }\r\n  if(req.method===\"DELETE\")\r\n  {\r\n    await cors(req, res);\r\n    const data = req.body;\r\n    try\r\n    {\r\n  \r\n   const dtcamp=new OwnCampaign(data.title,\"\",\"\",0,0,null,0,[]);\r\n    await FactoryLogic.getLogicCampaign().deleteCampaign(dtcamp);\r\n    return res.status(200).json({ status: \"Success\" });\r\n    }\r\n    catch (error) {\r\n      return res.status(500).json({\r\n        status: \"Error\",\r\n        data: {  error: error.toString() }\r\n      });\r\n    }\r\n  }\r\n  }\r\n\r\n "]},"metadata":{},"sourceType":"module"}